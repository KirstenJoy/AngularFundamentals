{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input } from '@angular/core';\nlet SessionListComponent = class SessionListComponent {\n  constructor(auth, voterService) {\n    this.auth = auth;\n    this.voterService = voterService;\n    this.visibleSessions = [];\n  }\n\n  ngOnChanges() {\n    if (this.sessions) {\n      this.filterSessions(this.filterBy);\n      this.sortBy === 'name' ? this.visibleSessions.sort(sortByNameAsc) : this.visibleSessions.sort(sortByVotesDesc);\n    }\n  }\n\n  toggleVote(session) {\n    if (this.userHasVoted(session)) {\n      this.voterService.deleteVoter(session, this.auth.currentUser.userName);\n    } else {\n      this.voterService.addVoter(session, this.auth.currentUser.userName);\n    }\n\n    if (this.sortBy === 'votes') this.visibleSessions.sort(sortByVotesDesc);\n  }\n\n  userHasVoted(session) {\n    return this.voterService.userHasVoted(session, this.auth.currentUser.userName);\n  }\n\n  filterSessions(filter) {\n    if (filter === 'all') {\n      this.visibleSessions = this.sessions.slice(0);\n    } else {\n      this.visibleSessions = this.sessions.filter(session => {\n        return session.level.toLocaleLowerCase() === filter;\n      });\n    }\n  }\n\n};\n\n__decorate([Input()], SessionListComponent.prototype, \"sessions\", void 0);\n\n__decorate([Input()], SessionListComponent.prototype, \"filterBy\", void 0);\n\n__decorate([Input()], SessionListComponent.prototype, \"sortBy\", void 0);\n\nSessionListComponent = __decorate([Component({\n  selector: 'session-list',\n  templateUrl: './session-list.component.html'\n})], SessionListComponent);\nexport { SessionListComponent };\n\nfunction sortByNameAsc(s1, s2) {\n  if (s1.name > s2.name) return 1;else if (s1.name === s2.name) return 0;else return -1;\n}\n\nfunction sortByVotesDesc(s1, s2) {\n  return s2.voters.length - s1.voters.length;\n}","map":null,"metadata":{},"sourceType":"module"}